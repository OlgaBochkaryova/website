!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(v){"use strict";var n=0,i=function(t,e,n){var i=t?t.split(" "):[],o=v.inArray(e,i);return n&&o<0?i.push(e):!n&&0<=o&&i.splice(o,1),0<i.length?i.join(" "):null},o=function(t,e){return new RegExp("\\b"+e+"\\b","i").test(t)};return v.fontpicker=new function(){this.regional={"":{ok:"OK",cancel:"Cancel",none:"Clear",button:"Font",title:"Pick a font",family:"Family:",style:"Style:",size:"Size:","unit-pixel":"px","unit-percentage":"%","settings-character":"Character","settings-paragraph":"Paragraph","setting-line-height":"Line height","setting-letter-spacing":"Letter spacing","setting-small-caps":"Small caps","setting-underline":"Underline","setting-overline":"Overline","setting-line-through":"Strike through",preview:"AaBbCcDd"}},this.families={default:[{name:"Arial",faces:["Arial","Helvetica","sans-serif"]},{name:"Arial Black",faces:["Arial Black","Gadget","sans-serif"]},{name:"Comic Sans MS",faces:["Comic Sans MS","cursive","sans-serif"]},{name:"Courier New",faces:["Courier New","Courier","monospace"]},{name:"Georgia",faces:["Georgia","serif"]},{name:"Impact",faces:["Impact","Charcoal","sans-serif"]},{name:"Lucida Console",faces:["Lucida Console","Monaco","monospace"]},{name:"Lucida Sans Unicode",faces:["Lucida Sans Unicode","Lucida Grande","sans-serif"]},{name:"Palatino Linotype",faces:["Palatino Linotype","Book Antiqua","Palatino","serif"]},{name:"Tahoma",faces:["Tahoma","Geneva","sans-serif"]},{name:"Times New Roman",faces:["Times New Roman","Times","serif"]},{name:"Trebuchet MS",faces:["Trebuchet MS","Helvetica","sans-serif"]},{name:"Verdana",faces:["Verdana","Geneva","sans-serif"]}]},this.partslists={full:["header","family","style","size","settings","preview","footer"],popup:["family","style","size","settings","preview","footer"],inline:["family","style","size","settings","preview"]},this.parts={header:function(i){var o=null,s=function(t){t.preventDefault(),i.close(i.options.revert)};this.init=function(){var t;o=v((t='<span class="ui-dialog-title">'+(i.options.title||i._getRegional("title"))+"</span>",!i.inline&&i.options.showCloseButton&&(t+='<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a>'),'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">'+t+"</div>")).prependTo(i.dialog);var e=v(".ui-dialog-titlebar-close",o);if(i._hoverable(e),i._focusable(e),e.bind("click",s),!i.inline&&i.options.draggable){var n={handle:o};i.options.containment&&(n.containment=i.options.containment),i.dialog.draggable(n)}},this.disable=function(t){v(".ui-dialog-titlebar-close",o)[t?"unbind":"bind"]("click",s)}},family:function(i){var o=null,t=function(){var t=i.options.families.slice();return i.options.nullable&&t.unshift({name:"",faces:null}),t},e=function(n){v.each(t(),function(t,e){if(e.name.toLowerCase()===n.toLowerCase())return i.font.css["font-family"]=e.faces,i.font.set=!0,i._change(),!1})};this.init=function(){var n;o=v((n="<div>"+i._getRegional("family")+"</div>",n+='<div style="padding-right:4px;"><input class="ui-fontpicker-family-text" type="text"/></div>',n+='<div><select class="ui-fontpicker-family-select" size="8">',v.each(t(),function(t,e){n+='<option value="'+e.name+'">'+e.name+"</option>"}),'<div class="ui-fontpicker-family">'+(n+="</select></div>")+"</div>")).appendTo(v(".ui-fontpicker-family-container",i.dialog)),v(".ui-fontpicker-family-text",o).on("change keyup",function(){e(v(this).val())}),v(".ui-fontpicker-family-select",o).change(function(){e(v(this).val())})},this.repaint=function(){var n=i.font.css["font-family"]?i.font.css["font-family"][0]:"";v.each(t(),function(t,e){if(e.faces===i.font.css["font-family"])return v(".ui-fontpicker-family-text,.ui-fontpicker-family-select",o).not(":focus").val(n),!1})}},style:function(o){var s=null,t=function(n){v.each(o.options.styles,function(t,e){if(e.name.toLowerCase()===n.toLowerCase())return o.font.css["font-weight"]="normal"===e.weight?null:e.weight,o.font.css["font-style"]="normal"===e.style?null:e.style,o.font.set=!0,o._change(),!1})};this.init=function(){var n;s=v((n="<div>"+o._getRegional("style")+"</div>",n+='<div style="padding-right:4px;"><input class="ui-fontpicker-style-text" type="text"/></div>',n+='<div><select class="ui-fontpicker-style-select" size="8">',v.each(o.options.styles,function(t,e){n+='<option value="'+e.name+'">'+e.name+"</option>"}),'<div class="ui-fontpicker-style">'+(n+="</select></div>")+"</div>")).appendTo(v(".ui-fontpicker-style-container",o.dialog)),v(".ui-fontpicker-style-text",s).on("change keyup",function(){t(v(this).val())}),v(".ui-fontpicker-style-select",s).change(function(){t(v(this).val())})},this.repaint=function(){var n=o.font.css["font-weight"]||"normal",i=o.font.css["font-style"]||"normal";v.each(o.options.styles,function(t,e){if(e.weight===n&&e.style===i)return v(".ui-fontpicker-style-text,.ui-fontpicker-style-select",s).not(":focus").val(e.name),!1})}},size:function(e){var n=null,t=function(){var t,n="<div>"+e._getRegional("size")+"</div>";return n+='<div style="padding-right:4px;"><input class="ui-fontpicker-size-text" type="text"/></div>',n+='<div><select class="ui-fontpicker-size-select" size="8">',v.each((t=e.options.sizes.slice(),e.options.nullable&&t.unshift(""),t),function(t,e){n+='<option value="'+e+'">'+e+"</option>"}),'<div class="ui-fontpicker-size">'+(n+="</select></div>")+"</div>"},i=function(t){e.font.css["font-size"]=t?Math.max(1,parseInt(t,10))+"px":null,e.font.set=!0,e._change()};this.init=function(){n=v(t()).appendTo(v(".ui-fontpicker-size-container",e.dialog)),v(".ui-fontpicker-size-text",n).on("change keyup",function(){i(v(this).val())}),v(".ui-fontpicker-size-select",n).change(function(){i(v(this).val())})},this.repaint=function(){var t=e.font.css["font-size"]?parseInt(e.font.css["font-size"],10):"";v(".ui-fontpicker-size-text,.ui-fontpicker-size-select",n).not(":focus").val(t)}},settings:function(f){var d=null,h={"line-height":function(e){var n="ui-fontpicker-settings-lineheight-"+e.fontpicker_index;this.id=function(){return n},this.paintTo=function(t){v('<input id="'+n+'" step="5" min="0" max="9999" type="number" value="'+(e.font.css["line-height"]?parseInt(e.font.css["line-height"]):"")+'"/>').prependTo(t).change(function(){var t=v(this).val();e.font.css["line-height"]=t?t+"%":null,e.font.set=!0,e._change()}).after(e._getRegional("unit-percentage"))},this.label=function(){return e._getRegional("setting-line-height")}},"small-caps":function(e){var n="ui-fontpicker-settings-smallcaps-"+e.fontpicker_index;this.id=function(){return n},this.paintTo=function(t){v('<input id="'+n+'" type="checkbox"/>').attr("checked",o(e.font.css["font-variant"],"small-caps")).prependTo(t).change(function(){e.font.css["font-variant"]=v(this).is(":checked")?"small-caps":null,e.font.set=!0,e._change()})},this.label=function(){return e._getRegional("setting-small-caps")}},underline:function(e){var n="ui-fontpicker-settings-underline-"+e.fontpicker_index;this.id=function(){return n},this.paintTo=function(t){v('<input id="'+n+'" type="checkbox"/>').attr("checked",o(e.font.css["text-decoration"],"underline")).prependTo(t).change(function(){e.font.css["text-decoration"]=i(e.font.css["text-decoration"],"underline",v(this).is(":checked")),e.font.set=!0,e._change()})},this.label=function(){return e._getRegional("setting-underline")}},overline:function(e){var n="ui-fontpicker-settings-overline-"+e.fontpicker_index;this.id=function(){return n},this.paintTo=function(t){v('<input id="'+n+'" type="checkbox"/>').attr("checked",o(e.font.css["text-decoration"],"overline")).prependTo(t).change(function(){e.font.css["text-decoration"]=i(e.font.css["text-decoration"],"overline",v(this).is(":checked")),e.font.set=!0,e._change()})},this.label=function(){return e._getRegional("setting-overline")}},"line-through":function(e){var n="ui-fontpicker-settings-linethrough-"+e.fontpicker_index;this.id=function(){return n},this.paintTo=function(t){v('<input id="'+n+'" type="checkbox"/>').attr("checked",o(e.font.css["text-decoration"],"line-through")).prependTo(t).change(function(){e.font.css["text-decoration"]=i(e.font.css["text-decoration"],"line-through",v(this).is(":checked")),e.font.set=!0,e._change()})},this.label=function(){return e._getRegional("setting-line-through")}},"letter-spacing":function(e){var n="ui-fontpicker-settings-letterspacing-"+e.fontpicker_index;this.id=function(){return n},this.paintTo=function(t){v('<input id="'+n+'" min="-999" max="999" type="number" value="'+(e.font.css["letter-spacing"]?parseInt(e.font.css["letter-spacing"]):"")+'"/>').prependTo(t).change(function(){var t=v(this).val();e.font.css["letter-spacing"]=t&&0!==t?t+"px":null,e.font.set=!0,e._change()}).after(e._getRegional("unit-pixel"))},this.label=function(){return e._getRegional("setting-letter-spacing")}}};this.init=function(){d=v('<div class="ui-fontpicker-settings"><ul/></div>').appendTo(v(".ui-fontpicker-settings-container",f.dialog)),f.settings={},v.each(f.options.settings,function(t,n){var e,i,o,s,a="ui-fontpicker-settings-"+t.toLowerCase()+"-"+f.fontpicker_index,l=v('<div id="'+a+'"></div>').appendTo(d),c=Math.ceil(n.length/3),r=[].concat.apply([],n.map(function(t,e){return e%c?[]:[n.slice(e,e+c)]})),u=v('<table class="ui-fontpicker-settings-table"/>').appendTo(l);for(e=0;e<c;++e)for(o=v("<tr/>").appendTo(u),i=0;i<3;++i)if(r[i]&&r[i][e]){var p='<label for="'+(s=new h[r[i][e]](f)).id()+'">'+s.label()+"</label>";s.paintTo(v('<td class="ui-fontpicker-settings-label"/>').html("&emsp;"+p).appendTo(o))}else v('<td width="'+100/3+'%" colspan="2"/>').appendTo(o);v("ul",d).append('<li><a href="#'+a+'">'+f._getRegional("settings-"+t)+"</a></li>")}),d.tabs()}},preview:function(t){var e=null;this.init=function(){e=v('<div class="ui-fontpicker-preview-outer"><div class="ui-fontpicker-preview-inner"><div class="ui-fontpicker-preview"><div class="ui-fontpicker-preview-text">'+(t.options.preview||t._getRegional("preview")).replace("\n","<br/>")+"</div></div></div></div>").appendTo(v(".ui-fontpicker-preview-container",t.dialog))},this.repaint=function(){v(".ui-fontpicker-preview-text",e).attr("style",t.font.getCss(!0))}},footer:function(e){var n=null,i="ui-fontpicker-special-none-"+e.fontpicker_index;this.init=function(){var t;n=v((t="",!e.inline&&e.options.showNoneButton&&(t+='<div class="ui-fontpicker-buttonset">',!e.inline&&e.options.showNoneButton&&(t+='<input type="radio" name="ui-fontpicker-special" id="'+i+'" class="ui-fontpicker-special-none"><label for="'+i+'">'+e._getRegional("none")+"</label>"),t+="</div>"),e.inline||(t+='<div class="ui-dialog-buttonset">',e.options.showCancelButton&&(t+='<button class="ui-fontpicker-cancel">'+e._getRegional("cancel")+"</button>"),t+='<button class="ui-fontpicker-ok">'+e._getRegional("ok")+"</button>",t+="</div>"),'<div class="ui-dialog-buttonpane ui-widget-content">'+t+"</div>")).appendTo(e.dialog),v(".ui-fontpicker-ok",n).button().click(function(){e.close()}),v(".ui-fontpicker-cancel",n).button().click(function(){e.close(!0)}),v(".ui-fontpicker-buttonset",n)[v.fn.controlgroup?"controlgroup":"buttonset"](),v("#"+i,n).click(function(){e.font.set=!1,e._change()})},this.repaint=function(){e.font.set?v("input",n).attr("checked",!1).button("refresh"):v(".ui-fontpicker-special-none",n).attr("checked",!0).button("refresh"),v(".ui-fontpicker-ok",n).button(e.changed?"enable":"disable")},this.update=function(){},this.disable=function(t){v(":input, :button",n).button(t?"disable":"enable"),t||v(".ui-fontpicker-ok",n).button(e.changed?"enable":"disable")}}},this.Font=function(t){var n,i;this.set=!1,this.css={},this.equals=function(t){return!!t&&(this.set===t.set&&this.getCss()===t.getCss())},this.getCss=function(){var n,i=[];return v.each(this.css,function(t,e){null!==e&&(v.isArray(e)?(n=[],v.each(e,function(t,e){n.push(/^\S+$/.test(e)?e:'"'+e+'"')}),0<n.length&&i.push(t+":"+n.join(","))):i.push(t+":"+e))}),i.sort().join(";")},this.copy=function(){return v.extend({},this)},this.setCss=function(t){var n,i=this,o=v("<div>").appendTo("body"),s=v('<div style="'+t+'"/>').appendTo(o);o.css("font-size",1e4),v.each({"text-decoration":"none","font-weight":"normal","font-style":"normal","font-variant":"normal","letter-spacing":"normal"},function(t,e){o.css(t,e),(n=s.css(t))!==e&&(i.css[t]=n)}),v.each({"line-height":"normal"},function(t,e){o.css(t,e),(n=s.css(t))!==e&&(i.css[t]=parseInt(100*parseInt(n)/parseInt(s.css("font-size")))+"%")}),v.each({"font-family":["sans-serif","serif"],"font-size":["10px","20px"],color:["black","white"]},function(t,e){o.css(t,e[0]),n=s.css(t),o.css(t,e[1]),n===s.css(t)&&(i.css[t]=n)}),o.remove()},"object"==typeof t&&t.jquery&&(n=t,i=[],v.each(["text-decoration","font-weight","font-style","font-variant","letter-spacing","line-height","font-family","font-size","color"],function(t,e){i.push(e+":"+n.css(e))}),t=i.join(";")),this.setCss(t)}},v.widget("vanderlee.fontpicker",{options:{altField:"",altOnChange:!0,autoOpen:!1,buttonImage:"img/fontpicker_button.png",buttonImageOnly:!0,buttonText:null,closeOnEscape:!0,closeOnOutside:!0,duration:"fast",families:v.fontpicker.families.default,inlineFrame:!0,layout:{family:[0,0,1,1],style:[1,0,1,1],size:[2,0,1,1],settings:[0,1,3,1],preview:[0,2,3,1]},modal:!0,nullable:!0,parts:"",preview:null,regional:"",settings:{character:["underline","line-through"]},showAnim:"fadeIn",showNoneButton:!1,showOn:"focus click alt",showOptions:{},sizes:[6,7,8,9,10,11,12,14,16,18,21,24,36,48,60,72],styles:[{name:"Normal",weight:"normal",style:"normal"},{name:"Bold",weight:"bold",style:"normal"},{name:"Italic",weight:"normal",style:"italic"},{name:"Bold italic",weight:"bold",style:"italic"}],title:null,cancel:null,close:null,init:null,ok:null,open:null,select:null,stop:null},_create:function(){var e=this;if(e.fontpicker_index=n++,e.widgetEventPrefix="fontpicker",e.opened=!1,e.generated=!1,e.inline=!1,e.changed=!1,e.dialog=null,e.button=null,e.image=null,e.overlay=null,e.events={window_resize:null,document_keydown:null,document_click_html:null},e.element.is("input")||e.element.text()||!1===e.options.inline){if(e.element.is("input")?e.options.css=e.element.val():e.element.text()&&(e.options.css=e.element),e._setFont(e.options.css),e._callback("init"),/\bfocus|all|both\b/.test(e.options.showOn)&&e.element.bind("focus",function(){e.open()}),/\bfocus|all|both\b/.test(e.options.hideOn)&&e.element.bind("focusout",function(t){e.close()}),/\bclick|all|both\b/.test(e.options.showOn)&&e.element.bind("click",function(t){e.opened&&/\bclick|all|both\b/.test(e.options.hideOn)?e.close():e.open()}),/\bbutton|all|both\b/.test(e.options.showOn)){if(""!==e.options.buttonImage){var t=e.options.buttonText||e._getRegional("button");e.image=v("<img/>").attr({src:e.options.buttonImage,alt:t,title:t}),e.options.buttonClass&&e.image.attr("class",e.options.buttonClass)}e.options.buttonImageOnly&&e.image?e.button=e.image:(e.button=v('<button type="button"></button>').html(e.image||e.options.buttonText).button(),e.image=e.image?v("img",e.button).first():null),e.button.insertAfter(e.element).click(function(){e.opened&&/\bbutton|all|both\b/.test(e.options.hideOn)?e.close():e.open()})}/\balt|all|both\b/.test(e.options.showOn)&&v(e.options.altField).bind("click",function(){e.opened&&/\balt|all|both\b/.test(e.options.hideOn)?e.close():e.open()}),e.options.autoOpen&&e.open()}else e.inline=!0,e._generate(),e.opened=!0;return(e.element.is(":disabled")||e.options.disabled)&&e.disable(),this},_setOption:function(t,e){switch(t){case"disabled":this[e?"disable":"enable"]()}v.Widget.prototype._setOption.apply(this,arguments)},enable:function(){this.element&&this.element.prop("disabled",!1),this.button&&this.button.prop("disabled",!1),this.dialog&&this.dialog.removeClass("ui-fontpicker-disabled"),this.options.disabled=!1,this.parts&&v.each(this.parts,function(t,e){e.disable&&e.disable(!1)})},disable:function(){this.element&&this.element.prop("disabled",!0),this.button&&this.button.prop("disabled",!0),this.dialog&&this.dialog.addClass("ui-fontpicker-disabled"),this.options.disabled=!0,this.parts&&v.each(this.parts,function(t,e){e.disable&&e.disable(!0)})},_setAltField:function(){this.options.altOnChange&&this.options.altField&&v(this.options.altField).attr("style",this.font.set?this.font.getCss():"")},_setFont:function(t){this.font=this._parseFont(t)||new v.fontpickerFontColor,this.currentColor=this.font.copy(),this._setAltField()},setFont:function(t){this._setFont(t),this._change()},getFont:function(){return this.font.getCss()},_generateInline:function(){v(this.element).html(this.options.inlineFrame?'<div class="ui-fontpicker ui-fontpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"></div>':'<div class="ui-fontpicker ui-fontpicker-inline"></div>'),this.dialog=v(".ui-fontpicker",this.element)},_generatePopup:function(){var i=this;i.dialog=v('<div class="ui-fontpicker ui-fontpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"></div>').appendTo("body"),null===i.events.document_click_html&&v(document).delegate("html","touchstart click",i.events.document_click_html=function(t){if(i.opened&&t.target!==i.element[0]&&!i.overlay)if(i.dialog.is(t.target)||0<i.dialog.has(t.target).length)i.element.blur();else{var e,n=v(t.target).parents();for(n.push(t.target),e=0;e<=n.length;++e){if(null!==i.button&&n[e]===i.button[0])return;if(/\balt|all|both\b/.test(i.options.showOn)&&v(i.options.altField).is(n[e]))return}i.options.closeOnOutside&&i.close(i.options.revert)}}),null===i.events.document_keydown&&v(document).bind("keydown",i.events.document_keydown=function(t){i.opened&&27===t.keyCode&&i.options.closeOnEscape&&i.close(i.options.revert),i.opened&&13===t.keyCode&&i.options.okOnEnter&&i.close()}),i.element.keydown(function(t){9===t.keyCode&&i.close()}).keyup(function(t){var e=i._parseFont(i.element.val());e&&!i.font.equals(e)&&(i.font=e,i._change())})},_generate:function(){var t,n,e,i,o=this,s=o.options.css;o.element.is("input")?s=o.element.val():o.element.text()&&(s=o.element),o._setFont(s),o[o.inline?"_generateInline":"_generatePopup"](),t="string"==typeof o.options.parts?v.fontpicker.partslists[o.options.parts]?v.fontpicker.partslists[o.options.parts]:v.fontpicker.partslists[o.inline?"inline":"popup"]:o.options.parts,o.parts={},v.each(t,function(t,e){v.fontpicker.parts[e]&&(o.parts[e]=new v.fontpicker.parts[e](o))}),o.generated||(n=[],v.each(o.options.layout,function(t,e){o.parts[t]&&n.push({part:t,pos:e})}),e=v(function(t,e){var n,i,o,s,a,l,c,r,u,p,f,d,h,g;for(t.sort(function(t,e){return t.pos[1]===e.pos[1]?t.pos[0]-e.pos[0]:t.pos[1]-e.pos[1]}),a=s=0,v.each(t,function(t,e){s=Math.max(s,e.pos[0]+e.pos[2]),a=Math.max(a,e.pos[1]+e.pos[3])}),n=[],i=0;i<s;++i)n.push([]);for(c=[],l=[],v.each(t,function(t,e){for(i=0;i<e.pos[2];i+=1)l[e.pos[0]+i]=!0;for(o=0;o<e.pos[3];o+=1)c[e.pos[1]+o]=!0}),p="",u=t[r=0],o=0;o<a;++o){for(p+="<tr>",i=0;i<s;)if(void 0!==u&&i===u.pos[0]&&o===u.pos[1]){for(p+=e(u,i,o),d=0;d<u.pos[3];d+=1)for(f=0;f<u.pos[2];f+=1)n[i+f][o+d]=!0;i+=u.pos[2],u=t[++r]}else{for(h=0,g=!1;i<s&&void 0===n[i][o]&&(void 0===u||o<u.pos[1]||o===u.pos[1]&&i<u.pos[0]);)!0===l[i]&&(h+=1),g=!0,i+=1;0<h?p+='<td colspan="'+h+'"></td>':g||(i+=1)}p+="</tr>"}return'<table cellspacing="0" cellpadding="0" border="0"><tbody>'+p+"</tbody></table>"}(n,function(t,e,n){return i=["ui-fontpicker-"+t.part+"-container"],0<e&&i.push("ui-fontpicker-padding-left"),0<n&&i.push("ui-fontpicker-padding-top"),'<td class="'+i.join(" ")+'"'+(1<t.pos[2]?' colspan="'+t.pos[2]+'"':"")+(1<t.pos[3]?' rowspan="'+t.pos[3]+'"':"")+' valign="top"></td>'})).appendTo(o.dialog),o.options.inlineFrame&&e.addClass("ui-dialog-content ui-widget-content"),o._initAllParts(),o._updateAllParts(),o.generated=!0)},_effectGeneric:function(t,e,n,i,o){var s=this;v.effects&&v.effects[s.options.showAnim]?t[e](s.options.showAnim,s.options.showOptions,s.options.duration,o):(t["slideDown"===s.options.showAnim?n:"fadeIn"===s.options.showAnim?i:e](s.options.showAnim?s.options.duration:null,o),s.options.showAnim&&s.options.duration||o())},_effectShow:function(t,e){this._effectGeneric(t,"show","slideDown","fadeIn",e)},_effectHide:function(t,e){this._effectGeneric(t,"hide","slideUp","fadeOut",e)},open:function(){var e,t,n,i=this;i.opened||(i._generate(),t=i.element.is(":hidden")?v("<div/>").insertBefore(i.element):i.element,i.element.is(":hidden")&&t.remove(),e=0,v(i.element[0]).parents().each(function(){var t=v(this).css("z-index");if("number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t))v(this).siblings().each(function(){var t=v(this).css("z-index");"number"!=typeof t&&"string"!=typeof t||""===t||isNaN(t)||e<t&&(e=parseInt(t,10))});else if(e<t)return e=parseInt(t,10),!1}),e+=2,i.dialog.css("z-index",e),i.options.modal&&(i.overlay=v('<div class="ui-widget-overlay"></div>').appendTo("body").css("z-index",e-1),null!==i.events.window_resize&&v(window).unbind("resize",i.events.window_resize),i.events.window_resize=function(){i.overlay&&(i.overlay.width(v(document).width()),i.overlay.height(v(document).height()))},v(window).bind("resize",i.events.window_resize),i.events.window_resize()),i._effectShow(this.dialog),i.options.position?"element"===(n=v.extend({},i.options.position)).of&&(n.of=t):n={my:"left top",at:"left bottom",of:t,collision:"flip"},i.dialog.position(n),i.opened=!0,i._callback("open",!0),v(function(){i._repaintAllParts()}))},close:function(t){var e=this;e.opened&&(t?(e.font=e.currentFont.copy(),e._change(),e._callback("cancel",!0)):(e.currentFont=e.font.copy(),e._callback("ok",!0)),e.changed=!1,e.overlay&&(v(window).unbind("resize",e.events.window_resize),e.overlay.remove()),e._effectHide(e.dialog,function(){e.dialog.remove(),e.dialog=null,e.generated=!1,e.opened=!1,e._callback("close",!0)}))},destroy:function(){var t=this;null!==t.events.document_click_html&&v(document).undelegate("html","touchstart click",t.events.document_click_html),null!==t.events.document_keydown&&v(document).unbind("keydown",t.events.document_keydown),null!==t.events.resizeOverlay&&v(window).unbind("resize",t.events.resizeOverlay),this.element.unbind(),this.overlay&&this.overlay.remove(),null!==this.dialog&&this.dialog.remove(),null!==this.image&&this.image.remove(),null!==this.button&&this.button.remove()},_callback:function(t){var e=this;return e.font.set?e._trigger(t,null,{style:e.font.getCss(),css:e.font.css}):e._trigger(t,null,{style:"",css:{}})},_initAllParts:function(){v.each(this.parts,function(t,e){e.init&&e.init()})},_updateAllParts:function(){v.each(this.parts,function(t,e){e.update&&e.update()})},_repaintAllParts:function(){v.each(this.parts,function(t,e){e.repaint&&e.repaint()})},_change:function(t){if(this.changed=!this.font.equals(this.currentFont),!this.inline)if(this.font.set){var e="";this.element.is("input")?e=this.element.val():this.element.text()&&(e=this.element),this.font.equals(this._parseFont(e))||this.element.val(this.font.getCss()).change()}else""!==this.element.val()&&this.element.val("").change();this._setAltField(),this.options.font=this.font.set?this.font.getCss():"",this.opened&&this._repaintAllParts(),this._callback("select"),(void 0===t||t)&&this._callback("stop")},_hoverable:function(t){t.hover(function(){t.addClass("ui-state-hover")},function(){t.removeClass("ui-state-hover")})},_focusable:function(t){t.focus(function(){t.addClass("ui-state-focus")}).blur(function(){t.removeClass("ui-state-focus")})},_getRegional:function(t){return void 0!==v.fontpicker.regional[this.options.regional][t]?v.fontpicker.regional[this.options.regional][t]:v.fontpicker.regional[""][t]},_parseFont:function(t){var e=this,i=new v.fontpicker.Font(t);if(i.css["font-family"]){var n=i.css["font-family"].split(/,/),o=!1;v.each(n,function(t,n){return n=v.trim(n.replace(/^(['"])(.*)\1$/,"$2")),v.each(e.options.families,function(t,e){if(n===e.name)return i.css["font-family"]=e.faces,!(o=!0)}),!o})}return i}}),v.vanderlee.fontpicker});